!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t){t.exports=JSON.parse('[{"id":1,"title":"Square","description":"アニメーションの練習。四角をただ回転させてるだけ。","source":"https://github.com/ttk1/wglp/tree/master/src/1"},{"id":2,"title":"Cube","description":"立方体を作ってみた。","source":"https://github.com/ttk1/wglp/tree/master/src/2"},{"id":3,"title":"Mouse","description":"マウスでぐりぐり。","source":"https://github.com/ttk1/wglp/tree/master/src/3"},{"id":4,"title":"TransformFeedbackの練習","description":"TransformFeedbackの練習。結果はconsoleに表示する。","source":"https://github.com/ttk1/wglp/tree/master/src/4"},{"id":5,"title":"フラグメントシェーダだけで描画","description":"フラグメントシェーダだけで描画。","source":"https://github.com/ttk1/wglp/tree/master/src/5"},{"id":6,"title":"パーティクル描画","description":"パーティクル描画","source":"https://github.com/ttk1/wglp/tree/master/src/6"}]')},function(t,e,r){e.rot_x=t=>{const e=r(2).getMatrix(4,4);return e.setValue(0,0,1),e.setValue(1,1,Math.cos(t)),e.setValue(2,1,-Math.sin(t)),e.setValue(1,2,Math.sin(t)),e.setValue(2,2,Math.cos(t)),e.setValue(3,3,1),e},e.rot_y=t=>{const e=r(2).getMatrix(4,4);return e.setValue(0,0,Math.cos(t)),e.setValue(2,0,Math.sin(t)),e.setValue(1,1,1),e.setValue(0,2,-Math.sin(t)),e.setValue(2,2,Math.cos(t)),e.setValue(3,3,1),e},e.rot_z=t=>{const e=r(2).getMatrix(4,4);return e.setValue(0,0,Math.cos(t)),e.setValue(1,0,-Math.sin(t)),e.setValue(0,1,Math.sin(t)),e.setValue(1,1,Math.cos(t)),e.setValue(2,2,1),e.setValue(3,3,1),e}},function(t,e){e.getMatrix=(t,e)=>new r(t,e);class r{constructor(t,e){this.m=t,this.n=e,this.init()}getArray(){const t=[];for(let e=0;e<this.m;e++)for(let r=0;r<this.n;r++)t[e+this.m*r]=this.matrix[e][r];return t}check(t,e){if(t<0||t>=this.m||e<0||e>=this.n)throw new Error("範囲外")}init(){this.matrix=[];for(let t=0;t<this.m;t++){this.matrix[t]=[];for(let e=0;e<this.n;e++)this.matrix[t][e]=0}}setValue(t,e,r){this.check(t,e),this.matrix[t][e]=r}getValue(t,e){return this.check(t,e),this.matrix[t][e]}mul(t){if(this.n!=t.m)throw new Error("サイズの不一致");const e=new r(this.m,t.n);for(let r=0;r<this.m;r++)for(let o=0;o<t.n;o++)e.setValue(r,o,n(r,o,this,t));return e;function n(t,e,r,n){let o=0;for(let i=0;i<r.n;i++)o+=r.getValue(t,i)*n.getValue(i,e);return o}}}},,function(t,e,r){window.onload=()=>{const t=Number(function(t){return window.location.search.replace(/^\?/,"").split("&").map(t=>t.split("=")).find(e=>e[0]===t)[1]}("id")),e=document.getElementById("title"),n=document.getElementById("description"),o=document.getElementById("source"),i=r(0).find(e=>e.id===t);if(!i)return void(e.innerHTML="not found");e.innerHTML=i.title,n.innerHTML=i.description,o.innerHTML="View on GitHub",o.href=i.source;const a=document.getElementById("container"),s=document.createElement("canvas");return a.appendChild(s),r(5)("./"+t+"/main").start(s)}},function(t,e,r){var n={"./1/main":6,"./2/main":13,"./3/main":21,"./4/main":29,"./5/main":35,"./6/main":41};function o(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=5},function(t,e,r){e.start=t=>{t.width=500,t.height=500;const e=r(7).getContext(t),n=r(8).getShaderProgram(e);r(11).setAttributes(e,n);let o=0;window.setInterval(()=>{r(12).setUniforms(e,n,13*o,17*o,19*o),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4),o+=.003},15)}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,r){function n(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,n(t,t.VERTEX_SHADER,r(9).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(10).default)),t.linkProgram(e),t.useProgram(e),e}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 hoge;\n\nuniform mat4 rotX;\nuniform mat4 rotY;\nuniform mat4 rotZ;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * (rotX * rotY * rotZ) * vec4(pos, 1.0);\n    hoge = (rotZ * rotY * rotX) * vec4(pos, 255.0);\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 hoge;\nout vec4 color;\nvoid main(void) {\n    color = hoge;\n}"},function(t,e){e.setAttributes=(t,e)=>{const r=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(r);const n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.setUniforms=(t,e,r,n,o)=>{const i=[1,0,0,0,0,Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,1];var a=t.getUniformLocation(e,"rotX");t.uniformMatrix4fv(a,!1,i);const s=[Math.cos(n),0,Math.sin(n),0,0,1,0,0,-Math.sin(n),0,Math.cos(n),0,0,0,0,1];a=t.getUniformLocation(e,"rotY"),t.uniformMatrix4fv(a,!1,s);const c=[Math.cos(o),-Math.sin(o),0,0,Math.sin(o),Math.cos(o),0,0,0,0,1,0,0,0,0,1];a=t.getUniformLocation(e,"rotZ"),t.uniformMatrix4fv(a,!1,c);a=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(a,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}},function(t,e,r){e.start=t=>{t.width=500,t.height=500;const e=r(14).getContext(t),n=r(15).getShaderProgram(e);r(18).setAttributes(e,n);const o=Date.now();!function t(){let i=(Date.now()-o)/6e3;r(20).setUniforms(e,n,13*i,17*i,19*i);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);e.drawArrays(e.TRIANGLES,0,36);window.requestAnimationFrame(t)}()}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,r){e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,n(t,t.VERTEX_SHADER,r(16).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(17).default)),t.linkProgram(e),t.useProgram(e),e;function n(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 color;\n\nuniform mat4 rotX;\nuniform mat4 rotY;\nuniform mat4 rotZ;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * (rotX * rotY * rotZ) * vec4(pos, 1.0);\n    color = vec4(pos, 255.0);\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 color;\nout vec4 outColor;\nvoid main(void) {\n    outColor = floor(abs(color));\n}"},function(t,e,r){const n=r(19).getPoint;e.setAttributes=(t,e)=>{const r=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(r);const o=n(1,1,1),i=n(1,-1,1),a=n(1,-1,-1),s=n(1,1,-1),c=n(-1,1,1),u=n(-1,-1,1),f=n(-1,-1,-1),l=n(-1,1,-1),d=[];function m(t,e,r,n){function o(t){d.push(t.x),d.push(t.y),d.push(t.z)}o(t),o(e),o(r),o(t),o(r),o(n)}m(o,i,a,s),m(c,u,f,l),m(o,i,u,c),m(a,s,l,f),m(i,a,f,u),m(s,o,c,l);const h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array(d),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.getPoint=(t,e,r)=>({x:t,y:e,z:r})},function(t,e){e.setUniforms=(t,e,r,n,o)=>{const i=[1,0,0,0,0,Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,1];var a=t.getUniformLocation(e,"rotX");t.uniformMatrix4fv(a,!1,i);const s=[Math.cos(n),0,Math.sin(n),0,0,1,0,0,-Math.sin(n),0,Math.cos(n),0,0,0,0,1];a=t.getUniformLocation(e,"rotY"),t.uniformMatrix4fv(a,!1,s);const c=[Math.cos(o),-Math.sin(o),0,0,Math.sin(o),Math.cos(o),0,0,0,0,1,0,0,0,0,1];a=t.getUniformLocation(e,"rotZ"),t.uniformMatrix4fv(a,!1,c);a=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(a,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}},function(t,e,r){e.start=t=>{t.width=500,t.height=500;const e=r(22).getContext(t),n=r(23).getShaderProgram(e);r(26).setAttributes(e,n);let o=null,i=null,a=r(1).rot_x(0);t.addEventListener("mousemove",function(t){null!=o&&null!=i||(o=t.offsetX,i=t.offsetY);const s=t.offsetX-o,c=t.offsetY-i;o=t.offsetX,i=t.offsetY;const u=r(1).rot_x(.01*c),f=r(1).rot_y(.01*s);a=u.mul(f).mul(a),r(28).setUniforms(e,n,a),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,36)},!1)}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,r){e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,n(t,t.VERTEX_SHADER,r(24).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(25).default)),t.linkProgram(e),t.useProgram(e),e;function n(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 color;\n\nuniform mat4 rot;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * rot * vec4(pos, 1.0);\n    color = vec4(pos, 255.0);\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 color;\nout vec4 outColor;\nvoid main(void) {\n    outColor = floor(abs(color));\n}"},function(t,e,r){const n=r(27).getPoint;e.setAttributes=(t,e)=>{const r=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(r);const o=n(1,1,1),i=n(1,-1,1),a=n(1,-1,-1),s=n(1,1,-1),c=n(-1,1,1),u=n(-1,-1,1),f=n(-1,-1,-1),l=n(-1,1,-1),d=[];function m(t,e,r,n){function o(t){d.push(t.x),d.push(t.y),d.push(t.z)}o(t),o(e),o(r),o(t),o(r),o(n)}m(o,i,a,s),m(c,u,f,l),m(o,i,u,c),m(a,s,l,f),m(i,a,f,u),m(s,o,c,l);const h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array(d),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.getPoint=(t,e,r)=>({x:t,y:e,z:r})},function(t,e){e.setUniforms=(t,e,r)=>{let n=t.getUniformLocation(e,"rot");t.uniformMatrix4fv(n,!1,r.getArray());n=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(n,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}},function(t,e,r){e.start=t=>{const e=r(30).getContext(t);r(31).getShaderProgram(e),r(34).setTransformFeedback(e),e.enable(e.RASTERIZER_DISCARD),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,1),e.endTransformFeedback(),e.disable(e.RASTERIZER_DISCARD);const n=new Float32Array(4);e.getBufferSubData(e.TRANSFORM_FEEDBACK_BUFFER,0,n),console.log(n)}},function(t,e){e.getContext=t=>t.getContext("webgl2")},function(t,e,r){e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,n(t,t.VERTEX_SHADER,r(32).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(33).default)),t.transformFeedbackVaryings(e,["result"],t.SEPARATE_ATTRIBS),t.linkProgram(e),t.useProgram(e),e;function n(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nout vec4 result;\nvoid main(void) {\n    result = vec4(1.0, 2.0, 3.0, 4.0) * 2.0;\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nvoid main(void) {\n}"},function(t,e){e.setTransformFeedback=t=>{const e=t.createBuffer(),r=t.createTransformFeedback();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,4*Float32Array.BYTES_PER_ELEMENT,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(36),o=r(37),i=r(38);e.start=t=>{t.width=500,t.height=500;const e=o.getContext(t),r=i.getShaderProgram(e);n.setAttributes(e,r),e.drawArrays(e.TRIANGLE_STRIP,0,4)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setAttributes=(t,e)=>{const r=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(r);const n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getShaderProgram=t=>{const e=t.createProgram();if(t.attachShader(e,n(t,t.VERTEX_SHADER,r(39).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(40).default)),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error("リンク失敗");return t.useProgram(e),e;function n(t,e,r){const n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("コンパイル失敗: "+t.getShaderInfoLog(n));return n}}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec3 color;\nvoid main(void) {\n    gl_Position = vec4(pos, 1.0);\n    color = pos;\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\n\nvec4 hoge = vec4(0, 0, 1, 1);\n\nin vec3 color;\nout vec4 outColor;\n\nconst float w = 20.0;\n\nvoid main(void) {\n    if (mod(gl_FragCoord.x, w * 2.0) <= w &&\n            mod(gl_FragCoord.y, w * 2.0) <= w ||\n        mod(gl_FragCoord.x, w * 2.0) > w && mod(gl_FragCoord.y, w * 2.0) > w) {\n        outColor = vec4(0, 1, 0, 1);\n    } else {\n        outColor = hoge;\n    }\n}"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(42),o=r(43),i=r(44),a=r(47);e.start=t=>{t.width=500,t.height=500;const e=1e4,r=o.getContext(t),s=i.getShaderProgram(r),c=[];c[0]=a.setTransformFeedback(r,e),c[1]=n.setAttributes(r,s,e);const u=r.getUniformLocation(s,"mouse");r.uniform2f(u,0,0),t.addEventListener("mousemove",function(e){const n=r.getUniformLocation(s,"mouse"),o=2*(e.offsetX/t.width-.5),i=2*(e.offsetY/t.height-.5);r.uniform2f(n,o,-i)},!1);let f=0;!function t(){r.beginTransformFeedback(r.POINTS);r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);r.drawArrays(r.POINTS,0,e);r.endTransformFeedback();r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,0,c[1-f]);r.bindBuffer(r.ARRAY_BUFFER,c[f]);const n=4*Float32Array.BYTES_PER_ELEMENT;const o=r.getAttribLocation(s,"pos");r.vertexAttribPointer(o,2,r.FLOAT,!1,n,0);const i=r.getAttribLocation(s,"vel");const a=2*Float32Array.BYTES_PER_ELEMENT;r.vertexAttribPointer(i,2,r.FLOAT,!1,n,a);r.bindBuffer(r.ARRAY_BUFFER,null);f=f?0:1;window.requestAnimationFrame(t)}()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setAttributes=(t,e,r)=>{const n=[];for(let t=0;t<r;t++){for(let t=0;t<2;t++)n.push(2*(Math.random()-.5));for(let t=0;t<2;t++)n.push(Math.random()-.5)}const o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW);const i=4*Float32Array.BYTES_PER_ELEMENT,a=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(a),t.vertexAttribPointer(a,2,t.FLOAT,!1,i,0);const s=t.getAttribLocation(e,"vel"),c=2*Float32Array.BYTES_PER_ELEMENT;return t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,i,c),t.bindBuffer(t.ARRAY_BUFFER,null),o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,r){"use strict";function n(t,e,r){const n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("コンパイル失敗: "+t.getShaderInfoLog(n));return n}Object.defineProperty(e,"__esModule",{value:!0}),e.getShaderProgram=t=>{const e=t.createProgram();if(t.attachShader(e,n(t,t.VERTEX_SHADER,r(45).default)),t.attachShader(e,n(t,t.FRAGMENT_SHADER,r(46).default)),t.transformFeedbackVaryings(e,["next_pos","next_vel"],t.INTERLEAVED_ATTRIBS),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error("リンク失敗");return t.useProgram(e),e}},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nuniform vec2 mouse;\n\nin vec2 pos;\nin vec2 vel;\nout vec2 next_pos;\nout vec2 next_vel;\n\nvoid main(void) {\n    gl_Position = vec4(pos, 0.0, 1.0);\n    gl_PointSize = 2.0;\n    next_pos = pos + vel * 0.1;\n\n    // 重力加速度、マウス位置との距離の二乗に反比例\n    vec2 acc = ((mouse - pos) / pow(distance(mouse, pos) + 1.0, 2.0)) * 0.01;\n    next_vel = vel + acc;\n    // 空気抵抗、速度の二乗に比例\n    vec2 res = next_vel * pow(length(next_vel), 2.0) * 0.05;\n    next_vel = next_vel - res;\n}"},function(t,e,r){"use strict";r.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\n\nout vec4 outColor;\n\nvoid main(void) {\n    if (distance(gl_PointCoord, vec2(0.5, 0.5)) < 0.5) {\n        // outColor = vec4(color, 1.0);\n        outColor = vec4(1.0, 0.0, 0.0, 1.0);\n    } else {\n        discard;\n    }\n}\n\n// gl_FragCoord\n// gl_PointCoord"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setTransformFeedback=(t,e)=>{const r=t.createBuffer(),n=t.createTransformFeedback();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,Float32Array.BYTES_PER_ELEMENT*e*4,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,r),r}}]);