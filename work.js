!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t){t.exports=[{id:1,title:"Square",description:"アニメーションの練習。四角をただ回転させてるだけ。",source:"https://github.com/ttk1/wglp/tree/master/src/1"},{id:2,title:"Cube",description:"立方体を作ってみた。",source:"https://github.com/ttk1/wglp/tree/master/src/2"},{id:3,title:"Mouse",description:"マウスでぐりぐり。",source:"https://github.com/ttk1/wglp/tree/master/src/3"}]},function(t,e,n){e.rot_x=t=>{const e=n(2).getMatrix(4,4);return e.setValue(0,0,1),e.setValue(1,1,Math.cos(t)),e.setValue(2,1,-Math.sin(t)),e.setValue(1,2,Math.sin(t)),e.setValue(2,2,Math.cos(t)),e.setValue(3,3,1),e},e.rot_y=t=>{const e=n(2).getMatrix(4,4);return e.setValue(0,0,Math.cos(t)),e.setValue(2,0,Math.sin(t)),e.setValue(1,1,1),e.setValue(0,2,-Math.sin(t)),e.setValue(2,2,Math.cos(t)),e.setValue(3,3,1),e},e.rot_z=t=>{const e=n(2).getMatrix(4,4);return e.setValue(0,0,Math.cos(t)),e.setValue(1,0,-Math.sin(t)),e.setValue(0,1,Math.sin(t)),e.setValue(1,1,Math.cos(t)),e.setValue(2,2,1),e.setValue(3,3,1),e}},function(t,e){e.getMatrix=(t,e)=>new n(t,e);class n{constructor(t,e){this.m=t,this.n=e,this.init()}getArray(){const t=[];for(let e=0;e<this.m;e++)for(let n=0;n<this.n;n++)t[e+this.m*n]=this.matrix[e][n];return t}check(t,e){if(t<0||t>=this.m||e<0||e>=this.n)throw new Error("範囲外")}init(){this.matrix=[];for(let t=0;t<this.m;t++){this.matrix[t]=[];for(let e=0;e<this.n;e++)this.matrix[t][e]=0}}setValue(t,e,n){this.check(t,e),this.matrix[t][e]=n}getValue(t,e){return this.check(t,e),this.matrix[t][e]}mul(t){if(this.n!=t.m)throw new Error("サイズの不一致");const e=new n(this.m,t.n);for(let n=0;n<this.m;n++)for(let r=0;r<t.n;r++)e.setValue(n,r,o(n,r,this,t));return e;function o(t,e,n,o){let r=0;for(let i=0;i<n.n;i++)r+=n.getValue(t,i)*o.getValue(i,e);return r}}}},,function(t,e,n){window.onload=()=>{const t=function(t){return window.location.search.replace(/^\?/,"").split("&").map(t=>t.split("=")).find(e=>e[0]==t)[1]}("id");if(!/^[1-9][0-9]*$/.test(t)){return void(document.getElementById("title").innerHTML="not found")}const e=n(0).find(e=>e.id==t);if(!e){return void(document.getElementById("title").innerHTML="not found")}document.getElementById("title").innerHTML=e.title,document.getElementById("description").innerHTML=e.description;const o=document.getElementById("source");o.innerHTML="View on GitHub",o.href=e.source;const r=document.getElementById("container"),i=document.createElement("canvas");switch(r.appendChild(i),t){case"1":return n(5).start(i);case"2":return n(12).start(i);case"3":return n(20).start(i)}}},function(t,e,n){e.start=t=>{t.width=500,t.height=500;const e=n(6).getContext(t),o=n(7).getShaderProgram(e);n(10).setAttributes(e,o);let r=0;window.setInterval(()=>{n(11).setUniforms(e,o,13*r,17*r,19*r),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4),r+=.003},15)}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,n){function o(t,e,n){const o=t.createShader(e);return t.shaderSource(o,n),t.compileShader(o),o}e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,o(t,t.VERTEX_SHADER,n(8).default)),t.attachShader(e,o(t,t.FRAGMENT_SHADER,n(9).default)),t.linkProgram(e),t.useProgram(e),e}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 hoge;\n\nuniform mat4 rotX;\nuniform mat4 rotY;\nuniform mat4 rotZ;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * (rotX * rotY * rotZ) * vec4(pos, 1.0);\n    hoge = (rotZ * rotY * rotX) * vec4(pos, 255.0);\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 hoge;\nout vec4 color;\nvoid main(void) {\n    color = hoge;\n}"},function(t,e){e.setAttributes=(t,e)=>{const n=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(n);const o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),t.STATIC_DRAW),t.vertexAttribPointer(n,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.setUniforms=(t,e,n,o,r)=>{const i=[1,0,0,0,0,Math.cos(n),-Math.sin(n),0,0,Math.sin(n),Math.cos(n),0,0,0,0,1];var a=t.getUniformLocation(e,"rotX");t.uniformMatrix4fv(a,!1,i);const s=[Math.cos(o),0,Math.sin(o),0,0,1,0,0,-Math.sin(o),0,Math.cos(o),0,0,0,0,1];a=t.getUniformLocation(e,"rotY"),t.uniformMatrix4fv(a,!1,s);const c=[Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,1,0,0,0,0,1];a=t.getUniformLocation(e,"rotZ"),t.uniformMatrix4fv(a,!1,c);a=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(a,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}},function(t,e,n){e.start=t=>{t.width=500,t.height=500;const e=n(13).getContext(t),o=n(14).getShaderProgram(e);n(17).setAttributes(e,o);const r=Date.now();!function t(){let i=(Date.now()-r)/6e3;n(19).setUniforms(e,o,13*i,17*i,19*i);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);e.drawArrays(e.TRIANGLES,0,36);window.requestAnimationFrame(t)}()}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,n){e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,o(t,t.VERTEX_SHADER,n(15).default)),t.attachShader(e,o(t,t.FRAGMENT_SHADER,n(16).default)),t.linkProgram(e),t.useProgram(e),e;function o(t,e,n){const o=t.createShader(e);return t.shaderSource(o,n),t.compileShader(o),o}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 color;\n\nuniform mat4 rotX;\nuniform mat4 rotY;\nuniform mat4 rotZ;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * (rotX * rotY * rotZ) * vec4(pos, 1.0);\n    color = vec4(pos, 255.0);\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 color;\nout vec4 outColor;\nvoid main(void) {\n    outColor = floor(abs(color));\n}"},function(t,e,n){const o=n(18).getPoint;e.setAttributes=(t,e)=>{const n=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(n);const r=o(1,1,1),i=o(1,-1,1),a=o(1,-1,-1),s=o(1,1,-1),c=o(-1,1,1),u=o(-1,-1,1),f=o(-1,-1,-1),l=o(-1,1,-1),m=[];function d(t,e,n,o){function r(t){m.push(t.x),m.push(t.y),m.push(t.z)}r(t),r(e),r(n),r(t),r(n),r(o)}d(r,i,a,s),d(c,u,f,l),d(r,i,u,c),d(a,s,l,f),d(i,a,f,u),d(s,r,c,l);const h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array(m),t.STATIC_DRAW),t.vertexAttribPointer(n,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.getPoint=(t,e,n)=>({x:t,y:e,z:n})},function(t,e){e.setUniforms=(t,e,n,o,r)=>{const i=[1,0,0,0,0,Math.cos(n),-Math.sin(n),0,0,Math.sin(n),Math.cos(n),0,0,0,0,1];var a=t.getUniformLocation(e,"rotX");t.uniformMatrix4fv(a,!1,i);const s=[Math.cos(o),0,Math.sin(o),0,0,1,0,0,-Math.sin(o),0,Math.cos(o),0,0,0,0,1];a=t.getUniformLocation(e,"rotY"),t.uniformMatrix4fv(a,!1,s);const c=[Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,1,0,0,0,0,1];a=t.getUniformLocation(e,"rotZ"),t.uniformMatrix4fv(a,!1,c);a=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(a,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}},function(t,e,n){e.start=t=>{t.width=500,t.height=500;const e=n(21).getContext(t),o=n(22).getShaderProgram(e);n(25).setAttributes(e,o);let r=null,i=null,a=n(1).rot_x(0);t.addEventListener("mousemove",function(t){null!=r&&null!=i||(r=t.offsetX,i=t.offsetY);const s=t.offsetX-r,c=t.offsetY-i;r=t.offsetX,i=t.offsetY;const u=n(1).rot_x(.01*c),f=n(1).rot_y(.01*s);a=u.mul(f).mul(a),n(27).setUniforms(e,o,a),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,36)},!1)}},function(t,e){e.getContext=t=>{const e=t.getContext("webgl2");return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e}},function(t,e,n){e.getShaderProgram=t=>{const e=t.createProgram();return t.attachShader(e,o(t,t.VERTEX_SHADER,n(23).default)),t.attachShader(e,o(t,t.FRAGMENT_SHADER,n(24).default)),t.linkProgram(e),t.useProgram(e),e;function o(t,e,n){const o=t.createShader(e);return t.shaderSource(o,n),t.compileShader(o),o}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\nin vec3 pos;\nout vec4 color;\n\nuniform mat4 rot;\nuniform mat4 prj;\n\nvoid main(void) {\n    gl_Position = prj * rot * vec4(pos, 1.0);\n    color = vec4(pos, 255.0);\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec4 color;\nout vec4 outColor;\nvoid main(void) {\n    outColor = floor(abs(color));\n}"},function(t,e,n){const o=n(26).getPoint;e.setAttributes=(t,e)=>{const n=t.getAttribLocation(e,"pos");t.enableVertexAttribArray(n);const r=o(1,1,1),i=o(1,-1,1),a=o(1,-1,-1),s=o(1,1,-1),c=o(-1,1,1),u=o(-1,-1,1),f=o(-1,-1,-1),l=o(-1,1,-1),m=[];function d(t,e,n,o){function r(t){m.push(t.x),m.push(t.y),m.push(t.z)}r(t),r(e),r(n),r(t),r(n),r(o)}d(r,i,a,s),d(c,u,f,l),d(r,i,u,c),d(a,s,l,f),d(i,a,f,u),d(s,r,c,l);const h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array(m),t.STATIC_DRAW),t.vertexAttribPointer(n,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null)}},function(t,e){e.getPoint=(t,e,n)=>({x:t,y:e,z:n})},function(t,e){e.setUniforms=(t,e,n)=>{let o=t.getUniformLocation(e,"rot");t.uniformMatrix4fv(o,!1,n.getArray());o=t.getUniformLocation(e,"prj"),t.uniformMatrix4fv(o,!1,[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1])}}]);